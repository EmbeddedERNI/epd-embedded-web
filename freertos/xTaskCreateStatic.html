
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="Using xTaskCreateStatic() to create an RTOS task using statically allocated memory." name="description"/>
    <meta content="xTaskCreateStatic, task, thread, RTOS task, RTOS thread, FreeRTOS, API, real time operating system" name="keywords"/>
    <title>This page describes the FreeRTOS xTaskCreateStatic() API
      function which allows an RTOS task to be created using statically
      allocated RAM.</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="/banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="/index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="/menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>xTaskCreateStatic<br/>
                      <small>[<a class="el" href="a00019.html">Task
                      Creation</a>]</small></h1>

                    <pre>
task. h
 TaskHandle_t xTaskCreateStatic( TaskFunction_t pxTaskCode,
                                 const char * const pcName,
                                 const uint32_t ulStackDepth,
                                 void * const pvParameters,
                                 UBaseType_t uxPriority,
                                 StackType_t * const puxStackBuffer,
                                 StaticTask_t * const pxTaskBuffer );</pre>

                    <p>Create a new <a href="/a00015.html">task</a>
                      and add it to the list of tasks that are ready to
                      run. <a href="/a00110.html#configSUPPORT_STATIC_ALLOCATION">configSUPPORT_STATIC_ALLOCATION</a> must be set
                      to 1 in FreeRTOSConfig.h for this RTOS API
                      function to be available.</p>

                    <p>Each task requires RAM that is used to hold the
                      task state, and used by the task as its stack. If
                      a task is created using <a href="/a00125.html">xTaskCreate()</a> then the required RAM is
                      automatically allocated from the <a href="/a00111.html">FreeRTOS heap</a>. If a
                      task is created using xTaskCreateStatic() then
                      the RAM is provided by the application writer,
                      which results in a greater number of parameters,
                      but allows the RAM to be statically allocated at
                      compile time. See the <a href="/Static_Vs_Dynamic_Memory_Allocation.html">Static Vs Dynamic allocation</a> page for more
                      information.</p>

                    <p>If you are using <a href="/FreeRTOS-MPU-memory-protection-unit.html">FreeRTOS-MPU</a> then it is recommended to use
                      <a href="/xTaskCreateRestricted.html">xTaskCreateRestricted()</a> in place of
                      xTaskCreateStatic().</p>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><em>pvTaskCode</em>
                                &nbsp;</td>

                              <td>Pointer to the task entry function
                                (just the name of the function that
                                implements the task, see the example
                                below).
                                <p>Tasks are normally <a href="/implementing-a-FreeRTOS-task.html">implemented as an infinite loop</a>, and must never attempt to return
                                  or exit from their implementing
                                  function. Tasks can however <a href="/a00126.html">delete
                                  themselves</a>.</p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><em>pcName</em>
                                &nbsp;</td>

                              <td>A descriptive name for the task.
                                This is mainly used to facilitate
                                debugging, but can also be used to <a href="/a00021.html#xTaskGetHandle">obtain a task handle</a>.
                                <p>The maximum length of a task's name
                                  is set using the
                                  configMAX_TASK_NAME_LEN parameter in
                                  <a href="/a00110.html">FreeRTOSConfig.h</a>.</p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><em>ulStackDepth</em>
                                &nbsp;</td>

                              <td>The puxStackBuffer parameter is used
                                to pass an array of StackType_t
                                variables into xTaskCreateStatic().
                                ulStackDepth must be set to the number
                                of indexes in the array.
                                <p>See the FAQ <a href="/FAQMem.html#StackSize">How
                                  big should the stack be?</a></p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><em>pvParameters</em>
                                &nbsp;</td>

                              <td>A value that will passed into the
                                created task as the task's parameter.
                                <p>If pvParameters is set to the
                                  address of a variable then the
                                  variable must still exist when the
                                  created task executes - so it is not
                                  valid to pass the address of a stack
                                  variable.</p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><em>uxPriority</em>
                                &nbsp;</td>

                              <td>The <a href="/RTOS-task-priority.html">priority</a> at which the created
                                task will execute.
                                <p>Systems that include MPU support
                                  can optionally create a task in a
                                  privileged (system) mode by setting
                                  bit portPRIVILEGE_BIT in uxPrriority.
                                  For example, to create a privileged
                                  task at priority 2 set uxPriority to
                                  ( 2 | portPRIVILEGE_BIT ).</p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><em>puxStackBuffer</em> &nbsp;</td>

                              <td>Must point to a StackType_t array
                                that has at least ulStackDepth indexes
                                (see the ulStackDepth parameter above)
                                - the array will be used as the task's
                                stack, so must be persistent (not
                                declared on the stack of a function).</td>
                            </tr>

                            <tr>
                              <td valign="top"><em>pxTaskBuffer</em>
                                &nbsp;</td>

                              <td>Must point to a variable of type
                                StaticTask_t. The variable will be used
                                to hold the new task's data structures
                                (TCB), so it must be persistent (not
                                declared on the stack of a function).</td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <dl compact="compact">
                      <dt><b>Returns:</b></dt>

                      <dd>If neither puxStackBuffer or pxTaskBuffer
                        are NULL then the task will be created, and the
                        task's handle is returned. If either
                        puxStackBuffer or pxTaskBuffer is NULL then the
                        task will not be created and NULL will be
                        returned.</dd>
                    </dl>
                    <b>Example usage:</b>
                    <pre>
    <font color="green">/* Dimensions the buffer that the task being created will use as its stack.
    NOTE:  This is the number of words the stack will hold, not the number of
    bytes.  For example, if each stack item is 32-bits, and this is set to 100,
    then 400 bytes (100 * 32-bits) will be allocated. */</font>
    #define STACK_SIZE 200

    <font color="green">/* Structure that will hold the TCB of the task being created. */</font>
    StaticTask_t xTaskBuffer;

    <font color="green">/* Buffer that the task being created will use as its stack.  Note this is
    an array of StackType_t variables.  The size of StackType_t is dependent on
    the RTOS port. */</font>
    StackType_t xStack[ STACK_SIZE ];

    <font color="green">/* Function that implements the task being created. */</font>
    void vTaskCode( void * pvParameters )
    {
        <font color="green">/* The parameter value is expected to be 1 as 1 is passed in the
        pvParameters value in the call to xTaskCreateStatic(). */</font>
        configASSERT( ( uint32_t ) pvParameters == 1UL );

        for( ;; )
        {
            <font color="green">/* Task code goes here. */</font>
        }
    }

    <font color="green">/* Function that creates a task. */</font>
    void vOtherFunction( void )
    {
        TaskHandle_t xHandle = NULL;

        <font color="green">/* Create the task without using any dynamic memory allocation. */</font>
        xHandle = xTaskCreateStatic(
                      vTaskCode,       <font color="green">/* Function that implements the task. */</font>
                      "NAME",          <font color="green">/* Text name for the task. */</font>
                      STACK_SIZE,      <font color="green">/* Number of indexes in the xStack array. */</font>
                      ( void * ) 1,    <font color="green">/* Parameter passed into the task. */</font>
                      tskIDLE_PRIORITY,<font color="green">/* Priority at which the task is created. */</font>
                      xStack,          <font color="green">/* Array to use as the task's stack. */</font>
                      &amp;xTaskBuffer );  <font color="green">/* Variable to hold the task's data structure. */</font>

        <font color="green">/* puxStackBuffer and pxTaskBuffer were not NULL, so the task will have
        been created, and xHandle will be the task's handle.  Use the handle
        to suspend the task. */</font>
        <a href="/a00130.html">vTaskSuspend</a>( xHandle );
    }
</pre>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <br/>

                    <p><br/>
                    </p>

                    <div align="center"><a href="#page_top"><small>[
                      Back to the top ]</small></a> &nbsp;&nbsp; <a href="/RTOS.html"><small>[ About FreeRTOS
                      ]</small></a> &nbsp;&nbsp; <a href="/static_menu.html"><small>[ Sitemap
                      ]</small></a> &nbsp;&nbsp; <small>[
                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</div>
                    <br/>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <div align="center" class="text_ad"><font size="1">Copyright (C) 2004-2010 Richard Barry. Copyright
                      (C) 2010-2016 Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="/copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>

    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></body>
</html>
