
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="FreeRTOS is a truely free and small footprint RTOS for microcontrollers. This page describes the xSemaphoreTake() FreeRTOS API function which is part of the RTOS semaphore API source code function set." name="description"/>
    <meta content="xSemaphoreTake, semaphore, mutex, mailbox, RTOS mailbox, FreeRTOS API, RTOS API, FreeRTOS queue, RTOS queue, queue API, xQueueCreate, ARM7, ARM9, Cortex-M3, RX600, RX62N, 8051, 8052, Free RTOS, royalty free, RTOS, free, RTOS free, open source, real time, embedded, FreeRTOS, source code, AVR, GNU, PIC, PIC18, development tools" name="keywords"/>
    <title>This page describes the xSemaphoreTake() FreeRTOS API
      function which is part of the RTOS semaphore API source code
      function set.</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>xSemaphoreTake<br/>
                      <small>[<a class="el" href="a00113.html">Semaphores</a>]</small></h1>
                    semphr. h
                    <div><font face="courier">xSemaphoreTake(
                      SemaphoreHandle_t xSemaphore, TickType_t
                      xTicksToWait );</font></div>

                    <pre><br/>
<em>Macro</em> to obtain a semaphore. The semaphore must have previously been
created with a call to xSemaphoreCreateBinary(), xSemaphoreCreateMutex() or
xSemaphoreCreateCounting().<br/>

This macro must not be called from an ISR.  xQueueReceiveFromISR() can be used to take a semaphore from within an interrupt if required, although this would not be
a normal operation.  Semaphores use queues as their underlying mechanism, so functions are to some extent interoperable.

<br/>

</pre>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><em>xSemaphore</em>&nbsp;</td>

                              <td><font face="arial">A handle to the
                                semaphore being taken - obtained when
                                the semaphore was created.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><em>xTicksToWait</em>&nbsp;</td>

                              <td><font face="arial">The time in
                                ticks to wait for the semaphore to
                                become available. The macro
                                portTICK_PERIOD_MS can be used to
                                convert this to a real time. A block
                                time of zero can be used to poll the
                                semaphore.</font>
                                <p>If <a href="a00110.html">INCLUDE_vTaskSuspend</a> is set to
                                  '1' then specifying the block time as
                                  portMAX_DELAY will cause the task to
                                  block indefinitely (without a
                                  timeout).</p>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <pre>
</pre>

                    <dl compact="compact">
                      <dt><b>Returns:</b></dt>

                      <dd>pdTRUE if the semaphore was obtained.
                        pdFALSE if xTicksToWait expired without the
                        semaphore becoming available.</dd>
                    </dl>

                    <pre>




<b>Example usage:</b> <font face="courier">
</font></pre>

                    <pre><font face="courier">
SemaphoreHandle_t xSemaphore = NULL;

<font color="green">/* A task that creates a semaphore. */</font>
void vATask( void * pvParameters )
{
    <font color="green">/* Create the semaphore to guard a shared resource.  As we are using
    the semaphore for mutual exclusion we create a mutex semaphore
    rather than a binary semaphore. */</font>
    xSemaphore = xSemaphoreCreateMutex();
}

<font color="green">/* A task that uses the semaphore. */</font>
void vAnotherTask( void * pvParameters )
{
    <font color="green">/* ... Do other things. */</font>

    if( xSemaphore != NULL )
    {
        <font color="green">/* See if we can obtain the semaphore.  If the semaphore is not
        available wait 10 ticks to see if it becomes free. */</font>
        if( xSemaphoreTake( xSemaphore, ( TickType_t ) 10 ) == pdTRUE )
        {
            <font color="green">/* We were able to obtain the semaphore and can now access the
            shared resource. */</font>

            <font color="green">/* ... */</font>

            <font color="green">/* We have finished accessing the shared resource.  Release the
            semaphore. */</font>
            xSemaphoreGive( xSemaphore );
        }
        else
        {
            <font color="green">/* We could not obtain the semaphore and can therefore not access
            the shared resource safely. */</font>
        }
    }
}

</font></pre>

                    <pre>
<br/><br/><br/><br/>

                                                <br/>
                                                <br/>                                                </pre>

                    <div align="center"><font face="courier"><a href="#page_top"><small>[ Back to the top
                      ]</small></a> &nbsp;&nbsp; <a href="RTOS.html"><small>[ About FreeRTOS ]</small></a>
                      &nbsp;&nbsp; <a href="static_menu.html"><small>[ Sitemap ]</small></a> &nbsp;&nbsp; <small>[

                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</font></div>

                    <pre> 
                                                <br/>                                                <br/>
                                                <br/>                                                <br/>
                                                <br/>                                                <br/>
                                                <br/>                                                </pre>

                    <div align="center" class="text_ad"><font face="courier"><font size="1">Copyright (C)
                      2004-2010 Richard Barry. Copyright (C) 2010-2016
                      Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></font></div>

                    <pre> 
                                        </pre>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>
    <font face="arial">
    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></font></body>
</html>
