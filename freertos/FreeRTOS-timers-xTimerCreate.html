
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="FreeRTOS is a completely free professional grade, portable, open source, mini Real Time kernel. A free RTOS for small embedded systems. This page describes the xTimerCreate() FreeRTOS API function which is part of the FreeRTOS software timer functionality." name="description"/>
    <meta content="timers, software timers, FreeRTOS API, RTOS API, FreeRTOS timer, RTOS timer, timer API, xTimerCreate, ARM7, ARM9, Cortex-M3, RX600, RX62N, 8051, 8052, Free RTOS, royalty free, RTOS, free, RTOS free, open source, real time, embedded, FreeRTOS, source code, AVR, GNU, PIC, PIC18, development tools" name="keywords"/>
    <title>FreeRTOS - Open Source software for microcontrollers -
      FreeRTOS xTimerCreate() API function description</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="/banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="/index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="/menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>xTimerCreate<br/>
                      <small>[<a class="el" href="FreeRTOS-Software-Timer-API-Functions.html">Timer API</a>]</small></h1>
                    timers.h
                    <pre><font face="courier">
 TimerHandle_t xTimerCreate
                 ( const char * const pcTimerName,
                   const TickType_t xTimerPeriod,
                   const UBaseType_t uxAutoReload,
                   void * const pvTimerID,
                   TimerCallbackFunction_t pxCallbackFunction );
</font></pre>

                    <p>Creates a new <a href="/RTOS-software-timer.html">software
                      timer</a> instance and returns a handle by which
                      the timer can be referenced.</p>

                    <p>For this RTOS API function to be available:</p>

                    <ol>
                      <li>configUSE_TIMERS and <a href="/a00110.html#configSUPPORT_DYNAMIC_ALLOCATION">configSUPPORT_DYNAMIC_ALLOCATION</a> must
                        both be set to 1 in FreeRTOSConfig.h
                        (configSUPPORT_DYNAMIC_ALLOCATION can also be
                        left undefined, in which case it will default
                        to 1).</li>

                      <li>The FreeRTOS/Source/timers.c C source file
                        must be included in the build.</li>
                    </ol>

                    <p>Each software timer requires a small amount of
                      RAM that is used to hold the timer's state. If a
                      timer is created using xTimerCreate() then this
                      RAM is automatically allocated from the <a href="/a00111.html">FreeRTOS heap</a>. If a
                      software timer is created using <a href="/xTimerCreateStatic.html">xTimerCreateStatic()</a> then the RAM is
                      provided by the application writer, which
                      requires an additional parameter, but allows the
                      RAM to be statically allocated at compile time.
                      See the <a href="/Static_Vs_Dynamic_Memory_Allocation.html">Static Vs Dynamic allocation</a> page for more
                      information.</p>

                    <p>Timers are created in the dormant state. The <a href="/FreeRTOS-timers-xTimerStart.html">xTimerStart()</a>, <a href="/FreeRTOS-timers-xTimerReset.html">xTimerReset()</a>, <a href="/FreeRTOS-timers-xTimerStartFromISR.html">xTimerStartFromISR()</a>, <a href="/FreeRTOS-timers-xTimerResetFromISR.html">xTimerResetFromISR()</a>, <a href="/FreeRTOS-timers-xTimerChangePeriod.html">xTimerChangePeriod()</a> and <a href="/FreeRTOS-timers-xTimerChangePeriodFromISR.html">xTimerChangePeriodFromISR()</a> API functions
                      can all be used to transition a timer into the
                      active state.</p>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><font face="arial"><em>pcTimerName</em></font> &nbsp;</td>

                              <td><font face="arial">A human readable
                                text name that is assigned to the
                                timer. This is done purely to assist
                                debugging. The RTOS kernel itself only
                                ever references a timer by its handle,
                                and never by its name.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>xTimerPeriod</em> &nbsp;</font></td>

                              <td><font face="arial">The period of
                                the timer. The period is specified in
                                ticks, and the macro pdMS_TO_TICKS()
                                can be used to convert a time specified
                                in milliseconds to a time specified in
                                ticks. For example, if the timer must
                                expire after 100 ticks, then simply set
                                xTimerPeriod to 100. Alternatively, if
                                the timer must expire after 500ms, then
                                set xTimerPeriod to pdMS_TO_TICKS( 500
                                ). pdMS_TO_TICKS() can only be used if
                                <a href="/a00110.html#configTICK_RATE_HZ">configTICK_RATE_HZ</a> is less than
                                or equal to 1000.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>uxAutoReload</em> &nbsp;</font></td>

                              <td><font face="arial">If uxAutoReload
                                is set to pdTRUE, then the timer will
                                expire repeatedly with a frequency set
                                by the xTimerPeriod parameter. If
                                uxAutoReload is set to pdFALSE, then
                                the timer will be a one-shot and enter
                                the dormant state after it
                                expires.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>pvTimerID</em> &nbsp;</font></td>

                              <td><font face="arial">An identifier
                                that is assigned to the timer being
                                created. Typically this would be used
                                in the timer callback function to
                                identify which timer expired when the
                                same callback function is assigned to
                                more than one timer, or together with
                                the <a href="/FreeRTOS-timers-vTimerSetTimerID.html">vTimerSetTimerID()</a> and <a href="/FreeRTOS-timers-pvTimerGetTimerID.html">pvTimerGetTimerID()</a> API functions
                                to save a value between calls to the
                                timer's callback function.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>pxCallbackFunction</em> &nbsp;</font></td>

                              <td><font face="arial">The function to
                                call when the timer expires. Callback
                                functions must have the prototype
                                defined by TimerCallbackFunction_t,
                                which is:</font>
                                <pre><font face="arial">void vCallbackFunction( TimerHandle_t xTimer );</font></pre>
                                <font face="arial">.</font></td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <dl compact="compact">
                      <dt><b>Returns:</b></dt>

                      <dd>If the timer is created successfully then a
                        handle to the newly created timer is returned.
                        If the timer cannot be created because either
                        there is insufficient FreeRTOS heap remaining
                        to allocate the timer structures, or the timer
                        period was set to 0, then NULL is returned.</dd>
                    </dl>

                    <p><br/>
                      <b>Example usage:</b></p>

                    <pre><font face="courier">
 #define NUM_TIMERS 5

 <font color="green">/* An array to hold handles to the created timers. */</font>
 TimerHandle_t xTimers[ NUM_TIMERS ];

 <font color="green">/* Define a callback function that will be used by multiple timer
 instances.  The callback function does nothing but count the number
 of times the associated timer expires, and stop the timer once the
 timer has expired 10 times.  The count is saved as the ID of the
 timer. */</font>
 void vTimerCallback( TimerHandle_t xTimer )
 {
 const uint32_t ulMaxExpiryCountBeforeStopping = 10;
 uint32_t ulCount;

    <font color="green">/* Optionally do something if the pxTimer parameter is NULL. */</font>
    configASSERT( pxTimer );

    <font color="green">/* The number of times this timer has expired is saved as the
    timer's ID.  Obtain the count. */</font>
    ulCount = ( uint32_t ) <a href="/FreeRTOS-timers-pvTimerGetTimerID.html">pvTimerGetTimerID</a>( xTimer );

    <font color="green">/* Increment the count, then test to see if the timer has expired
    ulMaxExpiryCountBeforeStopping yet. */</font>
    ulCount++;

    <font color="green">/* If the timer has expired 10 times then stop it from running. */</font>
    if( ulCount &gt;= ulMaxExpiryCountBeforeStopping )
    {
        <font color="green">/* Do not use a block time if calling a timer API function
        from a timer callback function, as doing so could cause a
        deadlock! */</font>
        <a href="/FreeRTOS-timers-xTimerStop.html">xTimerStop</a>( pxTimer, 0 );
    }
    else
    {
       <font color="green">/* Store the incremented count back into the timer's ID field
       so it can be read back again the next time this software timer
       expires. */</font>
       <a href="/FreeRTOS-timers-vTimerSetTimerID.html">vTimerSetTimerID</a>( xTimer, ( void * ) ulCount );
    }
 }

 void main( void )
 {
 long x;

     <font color="green">/* Create then start some timers.  Starting the timers before
     the RTOS scheduler has been started means the timers will start
     running immediately that the RTOS scheduler starts. */</font>
     for( x = 0; x &lt; NUM_TIMERS; x++ )
     {
         xTimers[ x ] = xTimerCreate
                   ( <font color="green">/* Just a text name, not used by the RTOS
                     kernel. */</font>
                     "Timer",
                     <font color="green">/* The timer period in ticks, must be
                     greater than 0. */</font>
                     ( 100 * x ) + 100,
                     <font color="green">/* The timers will auto-reload themselves
                     when they expire. */</font>
                     pdTRUE,
                     <font color="green">/* The ID is used to store a count of the
                     number of times the timer has expired, which
                     is initialised to 0. */</font>
                     ( void * ) 0,
                     <font color="green">/* Each timer calls the same callback when
                     it expires. */</font>
                     vTimerCallback
                   );

         if( xTimers[ x ] == NULL )
         {
             <font color="green">/* The timer was not created. */</font>
         }
         else
         {
             <font color="green">/* Start the timer.  No block time is specified, and
             even if one was it would be ignored because the RTOS
             scheduler has not yet been started. */</font>
             if( <a href="/FreeRTOS-timers-xTimerStart.html">xTimerStart</a>( xTimers[ x ], 0 ) != pdPASS )
             {
                 <font color="green">/* The timer could not be set into the Active
                 state. */</font>
             }
         }
     }

     <font color="green">/* ...
     Create tasks here.
     ... */</font>

     <font color="green">/* Starting the RTOS scheduler will start the timers running
     as they have already been set into the active state. */</font>
     vTaskStartScheduler();

     <font color="green">/* Should not reach here. */</font>
     for( ;; );
 }
</font></pre>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <br/>

                    <p><br/>
                    </p>

                    <div align="center"><a href="#page_top"><small>[
                      Back to the top ]</small></a> &nbsp;&nbsp; <a href="/RTOS.html"><small>[ About FreeRTOS
                      ]</small></a> &nbsp;&nbsp; <a href="/static_menu.html"><small>[ Sitemap
                      ]</small></a> &nbsp;&nbsp; <small>[
                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</div>
                    <br/>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <div align="center" class="text_ad"><font size="1">Copyright (C) 2004-2010 Richard Barry. Copyright
                      (C) 2010-2016 Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="/copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>

    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></body>
</html>
