
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="Give a Real Time Operating System (RTOS) notification from an interrupt" name="description"/>
    <meta content="RTOS, task, thread, notification" name="keywords"/>
    <title>vTaskNotifyGiveFromISR() RTOS task notification API
      documentation</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>vTaskNotifyGiveFromISR()<br/>
                      <small>[<a class="el" href="RTOS-task-notification-API.html">RTOS
                      Task Notification API</a>]</small></h1>

                    <p><br/>
                      task.h</p>

                    <pre><font face="courier">
 void vTaskNotifyGiveFromISR(
                     TaskHandle_t xTaskToNotify,
                     BaseType_t *pxHigherPriorityTaskWoken );
</font></pre>

                    <p>A version of <a href="xTaskNotifyGive.html">xTaskNotifyGive()</a> that can be called from
                      an interrupt service routine (ISR).</p>

                    <p>Each RTOS task has a 32-bit notification value
                      which is initialised to zero when the RTOS task
                      is created. An <a href="RTOS-task-notifications.html">RTOS task
                      notification</a> is an event sent directly to a
                      task that can unblock the receiving task, and
                      optionally update the receiving task's
                      notification value.</p>

                    <p>vTaskNotifyGiveFromISR() is a function intended
                      for use when an RTOS task notification value is
                      being <a href="RTOS-task-notifications.html#uses">used
                      as a light weight and faster binary or counting
                      semaphore</a> alternative. FreeRTOS semaphores
                      are given from an interrupt using the
                      xSemaphoreGiveFromISR() API function,
                      vTaskNotifyGiveFromISR() is the equivalent that
                      instead uses the receiving RTOS task's
                      notification value.</p>

                    <p>When a task notification value is being used as
                      a binary or counting semaphore equivalent then
                      the task being notified should wait for the
                      notification using the <a href="ulTaskNotifyTake.html">ulTaskNotifyTake()</a> API function rather than
                      the <a href="xTaskNotifyWait.html">xTaskNotifyWait()</a> API function.</p>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><font face="arial"><em>xTaskToNotify</em></font> &nbsp;</td>

                              <td><font face="arial">The handle of
                                the RTOS task being notified, and
                                having its notification value
                                incremented.</font>
                                <p><font face="arial">To obtain a
                                  task's handle create the task using
                                  <a href="a00125.html">xTaskCreate()</a> and make use of
                                  the pxCreatedTask parameter, or
                                  create the task using <a href="xTaskCreateStatic.html">xTaskCreateStatic()</a> and store
                                  the returned value, or use the task's
                                  name in a call to <a href="a00021.html#xTaskGetHandle">xTaskGetHandle()</a>.</font></p>

                                <p><font face="arial">The handle of
                                  the currently executing RTOS task is
                                  returned by the <a href="a00021.html#xTaskGetCurrentTaskHandle">xTaskGetCurrentTaskHandle()</a> API
                                  function.</font></p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>pxHigherPriorityTaskWoken</em></font> &nbsp;</td>

                              <td><font face="arial">*pxHigherPriorityTaskWoken must be
                                initialised to 0.</font>
                                <p><font face="arial">vTaskNotifyGiveFromISR() will set
                                  *pxHigherPriorityTaskWoken to pdTRUE
                                  if sending the notification caused a
                                  task to unblock, and the unblocked
                                  task has a priority higher than the
                                  currently running task.</font></p>

                                <p><font face="arial">If
                                  vTaskNotifyGiveFromISR() sets this
                                  value to pdTRUE then a context switch
                                  should be requested before the
                                  interrupt is exited. See the example
                                  below.</font></p>

                                <p><font face="arial">pxHigherPriorityTaskWoken is an
                                  optional parameter and can be set to
                                  NULL.</font></p>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <p><br/>
                      <b><a id="driver_example" name="driver_example">Example usage:</a></b></p>

                    <p><small>[More examples are referenced from the
                      main <a href="RTOS-task-notifications.html">RTOS task notifications page</a>]</small></p>

                    <pre><font face="courier">
<font color="green">/* This is an example of a transmit function in a generic peripheral driver.  An
RTOS task calls the transmit function, then waits in the Blocked state (so not
using an CPU time) until it is notified that the transmission is complete.  The
transmission is performed by a DMA, and the DMA end interrupt is used to notify
the task. */</font>

static TaskHandle_t xTaskToNotify = NULL;

<font color="green">/* The peripheral driver's transmit function. */</font>
void StartTransmission( uint8_t *pcData, size_t xDataLength )
{
    <font color="green">/* At this point xTaskToNotify should be NULL as no transmission is in
    progress.  A mutex can be used to guard access to the peripheral if
    necessary. */</font>
    configASSERT( xTaskToNotify == NULL );

    <font color="green">/* Store the handle of the calling task. */</font>
    xTaskToNotify = <a href="a00021.html#xTaskGetCurrentTaskHandle">xTaskGetCurrentTaskHandle()</a>;

    <font color="green">/* Start the transmission - an interrupt is generated when the transmission
    is complete. */</font>
    vStartTransmit( pcData, xDatalength );
}
<font color="green">/*-----------------------------------------------------------*/</font>

<font color="green">/* The transmit end interrupt. */</font>
void vTransmitEndISR( void )
{
BaseType_t xHigherPriorityTaskWoken = pdFALSE;

    <font color="green">/* At this point xTaskToNotify should not be NULL as a transmission was
    in progress. */</font>
    configASSERT( xTaskToNotify != NULL );

    <font color="green">/* Notify the task that the transmission is complete. */</font>
    vTaskNotifyGiveFromISR( xTaskToNotify, &amp;xHigherPriorityTaskWoken );

    <font color="green">/* There are no transmissions in progress, so no tasks to notify. */</font>
    xTaskToNotify = NULL;

    <font color="green">/* If xHigherPriorityTaskWoken is now set to pdTRUE then a context switch
    should be performed to ensure the interrupt returns directly to the highest
    priority task.  The macro used for this purpose is dependent on the port in
    use and may be called portEND_SWITCHING_ISR(). */</font>
    portYIELD_FROM_ISR( xHigherPriorityTaskWoken );
}
<font color="green">/*-----------------------------------------------------------*/</font>

<font color="green">/* The task that initiates the transmission, then enters the Blocked state (so
not consuming any CPU time) to wait for it to complete. */</font>
void vAFunctionCalledFromATask( uint8_t ucDataToTransmit, size_t xDataLength )
{
uint32_t ulNotificationValue;
const TickType_t xMaxBlockTime = pdMS_TO_TICKS( 200 );

    <font color="green">/* Start the transmission by calling the function shown above. */</font>
    StartTransmission( ucDataToTransmit, xDataLength );

    <font color="green">/* Wait for the transmission to complete. */</font>
    ulNotificationValue = <a href="ulTaskNotifyTake.html">ulTaskNotifyTake</a>( pdFALSE, xMaxBlockTime );

    if( ulNotificationValue == 1 )
    {
        <font color="green">/* The transmission ended as expected. */</font>
    }
    else
    {
        <font color="green">/* The call to ulTaskNotifyTake() timed out. */</font>
    }
}
</font></pre>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <br/>

                    <p><br/>
                    </p>

                    <div align="center"><a href="#page_top"><small>[
                      Back to the top ]</small></a> &nbsp;&nbsp; <a href="RTOS.html"><small>[ About FreeRTOS
                      ]</small></a> &nbsp;&nbsp; <a href="static_menu.html"><small>[ Sitemap
                      ]</small></a> &nbsp;&nbsp; <small>[
                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</div>
                    <br/>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <div align="center" class="text_ad"><font size="1">Copyright (C) 2004-2010 Richard Barry. Copyright
                      (C) 2010-2016 Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>

    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></body>
</html>
