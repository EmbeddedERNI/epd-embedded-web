
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="RTOS queue overwrite function" name="description"/>
    <meta content="RTOS, interrupt, ISR, queue, inter-task, communication, signal" name="keywords"/>
    <title>FreeRTOS - xQueueOverwriteFromISR()</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="/banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="/index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="/menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>xQueueOverwriteFromISR<br/>
                      <small>[<a class="el" href="a00018.html">Queue
                      Management</a>]</small></h1>
                    queue.h
                    <div><font face="courier">BaseType_t
                      xQueueOverwrite ( QueueHandle_t xQueue, const
                      void * pvItemToQueue BaseType_t
                      *pxHigherPriorityTaskWoken );</font></div>

                    <pre><br/>
This is a macro that calls the xQueueGenericSendFromISR() function.
<br/>
A version of <a href="/xQueueOverwrite.html">xQueueOverwrite()</a> that can
be used in an ISR.  xQueueOverwriteFromISR() is similar to xQueueSendToBackFromISR(),
but will write to the queue even if the queue is full, overwriting data that is already
held in the queue.
<br/>
xQueueOverwriteFromISR() is intended for use with queues that have a length of one,
meaning the queue is either empty or full.
<br/>
</pre>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><em>xQueue</em>
                                &nbsp;</td>

                              <td><font face="arial">The handle of
                                the queue to which the data is to be
                                sent.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><em>pvItemToQueue</em> &nbsp;</td>

                              <td><font face="arial">A pointer to the
                                item that is to be placed in the queue.
                                The size of the items the queue will
                                hold was defined when the <a href="/a00116.html">queue was
                                created</a>, and that many bytes will
                                be copied from pvItemToQueue into the
                                queue storage area.</font></td>
                            </tr>

                            <tr>
                              <td valign="top"><em>pxHigherPriorityTaskWoken</em> &nbsp;</td>

                              <td><font face="arial">xQueueOverwriteFromISR() will set
                                *pxHigherPriorityTaskWoken to pdTRUE if
                                sending to the queue caused a task to
                                unblock, and the unblocked task has a
                                priority higher than the currently
                                running task. If
                                xQueueOverwriteFromISR() sets this
                                value to pdTRUE then a context switch
                                should be requested before the
                                interrupt is exited. Refer to the
                                Interrupt Service Routines section of
                                the documentation for the port being
                                used to see how that is done.</font></td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <pre>
</pre>

                    <dl compact="compact">
                      <dt><b>Returns:</b></dt>

                      <dd>xQueueOverwriteFromISR() is a macro that
                        calls xQueueGenericSendFromISR(), and therefore
                        has the same return values as
                        xQueueSendToFrontFromISR(). However, pdPASS is
                        the only value that can be returned because
                        xQueueOverwriteFromISR() will write to the
                        queue even when the queue is already full.</dd>
                    </dl>

                    <pre>
<b>Example usage:</b>
<font face="courier">
</font></pre>

                    <pre><font face="courier">
QueueHandle_t xQueue;

void vFunction( void *pvParameters )
{
    <font color="green">/* Create a queue to hold one unsigned long value.  It is strongly
    recommended <b>not</b> to use xQueueOverwriteFromISR() on queues that can
    contain more than one value, and doing so will trigger an assertion
    if configASSERT() is defined. */</font>
    xQueue = xQueueCreate( 1, sizeof( unsigned long ) );
}

void vAnInterruptHandler( void )
{
<font color="green">/* xHigherPriorityTaskWoken must be set to pdFALSE before it is used. */</font>
BaseType_t xHigherPriorityTaskWoken = pdFALSE;
unsigned long ulVarToSend, ulValReceived;

    <font color="green">/* Write the value 10 to the queue using xQueueOverwriteFromISR(). */</font>
    ulVarToSend = 10;
    xQueueOverwriteFromISR( xQueue, &amp;ulVarToSend, &amp;xHigherPriorityTaskWoken );

    <font color="green">/* The queue is full, but calling xQueueOverwriteFromISR() again will still
    pass because the value held in the queue will be overwritten with the
    new value. */</font>
    ulVarToSend = 100;
    xQueueOverwriteFromISR( xQueue, &amp;ulVarToSend, &amp;xHigherPriorityTaskWoken );

    <font color="green">/* Reading from the queue will now return 100. */</font>

    <font color="green">/* ... */</font>

    if( xHigherPrioritytaskWoken == pdTRUE )
    {
        <font color="green">/* Writing to the queue caused a task to unblock and the unblocked task
        has a priority higher than or equal to the priority of the currently
        executing task (the task this interrupt interrupted).  Perform a
        context switch so this interrupt returns directly to the unblocked
        task. */</font>
        portYIELD_FROM_ISR(); <font color="green">/* or portEND_SWITCHING_ISR() depending on the
        port.*/</font>
    }
}
</font></pre>

                    <pre>

<br/><br/><br/><br/>

                                                <br/>
                                                <br/>                                                </pre>

                    <div align="center"><font face="courier"><a href="#page_top"><small>[ Back to the top
                      ]</small></a> &nbsp;&nbsp; <a href="/RTOS.html"><small>[ About FreeRTOS ]</small></a>
                      &nbsp;&nbsp; <a href="/static_menu.html"><small>[ Sitemap ]</small></a> &nbsp;&nbsp; <small>[

                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</font></div>

                    <pre> 
                                                <br/>                                                <br/>
                                                <br/>                                                <br/>
                                                <br/>                                                <br/>
                                                <br/>                                                </pre>

                    <div align="center" class="text_ad"><font face="courier"><font size="1">Copyright (C)
                      2004-2010 Richard Barry. Copyright (C) 2010-2016
                      Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="/copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></font></div>

                    <pre> 
                                        </pre>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>
    <font face="Arial">
    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></font></body>
</html>
