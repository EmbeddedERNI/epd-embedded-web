
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="Take a Real Time Operating System (RTOS) notification value as if it were a semaphore" name="description"/>
    <meta content="RTOS, task, thread, notification" name="keywords"/>
    <title>ulTaskNotifyTake() RTOS task notification API documentation</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css">
</style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="banners.js" type="text/javascript">
</script>
    <script src="stlib.js" type="text/javascript">
</script>
    <script src="left_menu.js" type="text/javascript">
</script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript">
</script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js">
</script>
    <link href="code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript">
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
</script>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    <script type="text/javascript">
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
</script>
    <script type="text/javascript">
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
</script>
    <script type="text/javascript">
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

</script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="index.html"><img alt="Free RTOS logo" border="0" src="logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>ulTaskNotifyTake()<br/>
                      <small>[<a class="el" href="RTOS-task-notification-API.html">RTOS
                      Task Notification API</a>]</small></h1>

                    <p><br/>
                      task.h</p>

                    <pre><font face="courier">
 uint32_t ulTaskNotifyTake( BaseType_t xClearCountOnExit,
                            TickType_t xTicksToWait );
</font></pre>

                    <p>Each RTOS task has a 32-bit notification value
                      which is initialised to zero when the RTOS task
                      is created. An <a href="RTOS-task-notifications.html">RTOS task
                      notification</a> is an event sent directly to a
                      task that can unblock the receiving task, and
                      optionally update the receiving task's
                      notification value.</p>

                    <p>ulTaskNotifyTake() is intended for use when a
                      task notification is <a href="RTOS-task-notifications.html#uses">used
                      as a faster and lighter weight binary or counting
                      semaphore</a> alternative. FreeRTOS semaphores
                      are taken using the xSemaphoreTake() API
                      function, ulTaskNotifyTake() is the equivalent
                      that instead uses a task notification.</p>

                    <p>When a task is using its notification value as
                      a binary or counting semaphore other tasks and
                      interrupts should send notifications to it using
                      either the <a href="xTaskNotifyGive.html">xTaskNotifyGive()</a> macro, or the <a href="xTaskNotify.html">xTaskNotify()</a>
                      function with the function's eAction parameter
                      set to eIncrement (the two are equivalent).</p>

                    <p>ulTaskNotifyTake() can either clear the task's
                      notification value to zero on exit, in which case
                      the notification value acts like a binary
                      semaphore, or decrement the task's notification
                      value on exit, in which case the notification
                      value acts more like a counting semaphore.</p>

                    <p>An RTOS task can use ulTaskNotifyTake() to
                      [optionally] block to wait for a the task's
                      notification value to be non-zero. The task does
                      not consume any CPU time while it is in the
                      Blocked state.</p>

                    <p>Where as <a href="xTaskNotifyWait.html">xTaskNotifyWait()</a> will return when a
                      notification is pending, ulTaskNotifyTake() will
                      return when the task's notification value is not
                      zero, decrementing the task's notification value
                      before it returns.</p>

                    <dl compact="compact">
                      <dt><b>Parameters:</b></dt>

                      <dd>
                        <table border="0" cellpadding="0" cellspacing="10">
                          <tbody>
                            <tr>
                              <td valign="top"><font face="arial"><em>xClearCountOnExit</em></font> &nbsp;</td>

                              <td><font face="arial">If an RTOS task
                                notification is received and
                                xClearCountOnExit is set to pdFALSE
                                then the RTOS task's notification value
                                is decremented before
                                ulTaskNotifyTake() exits. This is
                                equivalent to the value of a counting
                                semaphore being decremented by a
                                successful call to
                                xSemaphoreTake().</font>
                                <p><font face="arial">If an RTOS task
                                  notification is received and
                                  xClearCountOnExit is set to pdTRUE
                                  then the RTOS task's notification
                                  value is reset to 0 before
                                  ulTaskNotifyTake() exits. This is
                                  equivalent to the value of a binary
                                  semaphore being left at zero (or
                                  empty, or 'not available') after a
                                  successful call to
                                  xSemaphoreTake().</font></p>
                              </td>
                            </tr>

                            <tr>
                              <td valign="top"><font face="arial"><em>xTicksToWait</em></font> &nbsp;</td>

                              <td><font face="arial">The maximum time
                                to wait in the Blocked state for a
                                notification to be received if a
                                notification is not already pending
                                when ulTaskNotifyTake() is
                                called.</font>
                                <p><font face="arial">The RTOS task
                                  does not consume any CPU time when it
                                  is in the Blocked state.</font></p>

                                <p><font face="arial">The time is
                                  specified in RTOS tick periods. The
                                  pdMS_TO_TICKS() macro can be used to
                                  convert a time specified in
                                  milliseconds into a time specified in
                                  ticks.</font></p>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </dd>
                    </dl>

                    <dl compact="compact">
                      <dt><b>Returns:</b></dt>

                      <dd>The value of the task's notification value
                        before it is decremented or cleared (see the
                        description of xClearCountOnExit).</dd>
                    </dl>

                    <p><br/>
                      <b>Example usage:</b></p>

                    <p><small>[More examples are referenced from the
                      main <a href="RTOS-task-notifications.html">RTOS task notifications page</a>]</small></p>

                    <pre><font face="courier">
<font color="green">/* An interrupt handler.  The interrupt handler does not perform any processing,
instead it unblocks a high priority task in which the event that generated the
interrupt is processed.  If the priority of the task is high enough then the
interrupt will return directly to the task (so it will interrupt one task but
return to a different task), so the processing will occur contiguously in time -
just as if all the processing had been done in the interrupt handler itself. */</font>
void vANInterruptHandler( void )
{
BaseType_t xHigherPriorityTaskWoken;

    <font color="green">/* Clear the interrupt. */</font>
    prvClearInterruptSource();

    <font color="green">/* xHigherPriorityTaskWoken must be initialised to pdFALSE.  If calling
    vTaskNotifyGiveFromISR() unblocks the handling task, and the priority of
    the handling task is higher than the priority of the currently running task,
    then xHigherPriorityTaskWoken will automatically get set to pdTRUE. */</font>
    xHigherPriorityTaskWoken = pdFALSE;

    <font color="green">/* Unblock the handling task so the task can perform any processing necessitated
    by the interrupt.  xHandlingTask is the task's handle, which was obtained
    <a href="a00125.html">when the task was created</a>. */</font>
    vTaskNotifyGiveFromISR( xHandlingTask, &amp;xHigherPriorityTaskWoken );

    <font color="green">/* Force a context switch if xHigherPriorityTaskWoken is now set to pdTRUE.
    The macro used to do this is dependent on the port and may be called
    portEND_SWITCHING_ISR. */</font>
    portYIELD_FROM_ISR( xHigherPriorityTaskWoken );
}
<font color="green">/*-----------------------------------------------------------*/</font>

<font color="green">/* A task that blocks waiting to be notified that the peripheral needs servicing,
processing all the events pending in the peripheral each time it is notified to 
do so. */</font>
void vHandlingTask( void *pvParameters )
{
BaseType_t xEvent;

    for( ;; )
    {
        <font color="green">/* Block indefinitely (without a timeout, so no need to check the function's
        return value) to wait for a notification.  Here the RTOS task notification
        is being used as a binary semaphore, so the notification value is cleared
        to zero on exit.  NOTE!  Real applications should not block indefinitely,
        but instead time out occasionally in order to handle error conditions
        that may prevent the interrupt from sending any more notifications. */</font>
        ulTaskNotifyTake( pdTRUE,          <font color="green">/* Clear the notification value before
                                           exiting. */</font>
                          portMAX_DELAY ); <font color="green">/* Block indefinitely. */</font>

        <font color="green">/* The RTOS task notification is used as a binary (as opposed to a
        counting) semaphore, so only go back to wait for further notifications
        when all events pending in the peripheral have been processed. */</font>
        do
        {
            xEvent = xQueryPeripheral();

            if( xEvent != NO_MORE_EVENTS )
            {
                vProcessPeripheralEvent( xEvent );
            }

        } while( xEvent != NO_MORE_EVENTS );
    }
}
</font></pre>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <br/>

                    <p><br/>
                    </p>

                    <div align="center"><a href="#page_top"><small>[
                      Back to the top ]</small></a> &nbsp;&nbsp; <a href="RTOS.html"><small>[ About FreeRTOS
                      ]</small></a> &nbsp;&nbsp; <a href="index.html"><small>[ Sitemap
                      ]</small></a> &nbsp;&nbsp; <small>[
                      <script type="text/javascript">
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
</script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</div>
                    <br/>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <div align="center" class="text_ad"><font size="1">Copyright (C) 2004-2010 Richard Barry. Copyright
                      (C) 2010-2016 Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>

    <script language="JavaScript" type="text/javascript">
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
</script></body>
</html>
