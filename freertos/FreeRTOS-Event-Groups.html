
<html>
  <head>
    <meta content="HTML Tidy for HTML5 for Linux version 5.2.0" name="generator"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="RTOS event bits, event groups and event flags" name="description"/>
    <meta content="RTOS, event, events, flags, event bits, event groups, rendezvous" name="keywords"/>
    <title>FreeRTOS event bits, event groups and event flags</title>

    <link href="doxygen.css" rel="stylesheet"/>
    <style type="text/css"><![CDATA[
]]></style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <script src="/banners.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/stlib.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="/left_menu.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"><![CDATA[
]]></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"><![CDATA[
]]></script>
    <link href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script type="text/javascript"><![CDATA[
        window.onload = function()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        };
]]></script>
    <script type="text/javascript"><![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6086815-2']);
  _gaq.push(['_setDomainName', 'freertos.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_left_image_clash()
        {
                var rect1 = document.getElementById( 'left_banner_image' ).getBoundingClientRect();
                var rect2 = document.getElementById( 'id_tree_menu' ).getBoundingClientRect();

                if ( rect1.right >= rect2.left ) {
                        document.getElementById( 'td_left_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_left_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        function check_right_image_clash()
        {
                var rect1 = document.getElementById( 'td_right_side_bar' ).getBoundingClientRect();

                if( rect1.right >= window.innerWidth )
                {
                        document.getElementById( 'td_right_side_bar' ).style.display = 'none';
                        document.getElementById( 'td_right_side_bar' ).style.width = '0';
                }
        }
]]></script>
    <script type="text/javascript"><![CDATA[
        $( document ).ready( function()
                                                {
                                                        window.setTimeout("blindDownMenuHint();", 5000);
                                                        window.setTimeout("blindUpMenuHint();", 12000);
                                                }
        )

        function blindDownMenuHint()
        {
                if( window.name != "done" )
                {
                        $( "#menu_hint").show( "blind", "slow" );
                        window.name = "done";
                }
        }

        function blindUpMenuHint()
        {
                $( "#menu_hint").hide( "blind", "slow" );
        }

]]></script></head>

  <body><font face="Arial"><a id="page_top" name="page_top"/></font>
    <table>
      <tbody>
        <tr>
          <td valign="top">
            <!-- Content area - the other td is the side bar area. -->
            <table align="center" cellpadding="5" cellspacing="0" style="height:100%;background:white; border-left:solid 1px #f0f0f0; border-right:solid 1px #f0f0f0;">
              <tbody>
                <tr valign="top">
                  <td colspan="3" style="height:100px;">
                    <!-- Spans the left menu, blank line, and main content columns of the next row. -->

                    <table border="0" cellpadding="0" cellspacing="2" style="width:100%;"><!-- Rows for logos and banners, blue lines with menu. -->

                      <tbody>
                        <tr style="padding: 0px 0px 0px 0px;"><!-- Top row, banner and logo. -->

                          <td>
                            <table cellpadding="0" cellspacing="5px" style="table-layout:fixed;" width="100%">
                              <tbody>
                                <tr>
                                  <td id="logo_column" style="line-height:normal;" valign="middle" width="174px">
                                    <div style="float:left;"><a href="/index.html"><img alt="Free RTOS logo" border="0" src="/logo.jpg" style="padding: 0 0 0 5px;" width="164px"/></a></div>
                                  </td>

                                  <td style="width:5px; border-top:solid 2px #e6e6e6; border-left:solid 2px #e6e6e6; border-bottom:solid 2px #e6e6e6;"> &nbsp;</td>

                                  <td id="page_heading_largerx" style="line-height:normal; width:324px;" valign="middle">
                                    <h3>Quality RTOS &amp; Embedded
                                      Software<br/>
                                    </h3>

                                    
                                  </td>

                                  <td>
                                    
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>

                        <tr bgcolor="#7095D3" style="height:5px;"><!-- Blank line. -->

                          <td/>
                        </tr>

                        <tr bgcolor="#B6CFFE" style="height:19px;"><!-- Horizontal menu. -->

                          <td bgcolor="#B6CFFE" valign="middle">
                            <!-- Top menu with social media icons. -->
                            

                            

                            

                            <table cellpadding="0" cellspacing="0" style="padding-top:4px;"><!-- Top horizontal menu. -->

                              <tbody>
                                <tr>
                                  <td width="4px">
                                    <!-- Just brings the first white menu spacing bar in from the left of the blue bar. --></td>

                                  <td align="center" style="border-right:solid 2px white; border-left:solid 2px white; width:100px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:112px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:104px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:94px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>

                                  <td align="center" style="border-right:solid 2px white; width:90px; line-height:normal;"/>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>

                <tr valign="top"><!-- Main content row with menu and content area columns. -->

                  

                  <td style="width:2px; padding-right:0; padding-left:0;"> <!-- Blank column. -->
                    <!-- Just to move the main text away from the silver verticle line slightly. --></td>

                  <td id="td_main_content_column"><!-- Main content area. -->
                    <table border="0" cellpadding="0" cellspacing="0" id="menu_hint" style="height:30px; background:#ffff99; display:none;">
                      <tbody>
                        <tr valign="middle">
                          <td width="5px"/>

                          <td width="30px"><img border="0" height="25px" src="/menu_hint_arrow.png" style="padding:0;"/></td>

                          <td valign="middle">Hint: Use the tree menu
                            to navigate groups of related pages &nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <h1>Event Bits (or <i>flags</i>) and Event
                      Groups<br/>
                      <small>[<a class="el" href="Inter-Task-Communication.html">Inter-task
                      communication and synchronisation</a>]</small></h1>

                    <div align="center">
                      <table bgcolor="#B6CFFE" cellpadding="3" cellspacing="0">
                        <tbody>
                          <tr>
                            <td align="center" style="border:solid 1px white; background-color:#7095d3;"><a href="/RTOS_Task_Notification_As_Event_Group.html" style="color:white;"><b>&nbsp;TIP:
                              'Task Notifications' can provide a light
                              weight alternative to event groups in
                              many situations&nbsp;</b></a></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <p><br/>
                      On this page:</p>

                    <ul>
                      <li><a href="#event_bits">Event Bits (Event
                        Flags)</a></li>

                      <li><a href="#event_groups">Event Groups</a></li>

                      <li><a href="#data_types">Event Group and Event
                        Bits Data Types</a></li>

                      <li><a href="#API">Event Group RTOS API
                        Functions</a></li>

                      <li><a href="#challenges">The Challenges an
                        RTOS Must Overcome When Implementing Event
                        Groups</a></li>

                      <li><a href="#examples">Example code</a></li>
                    </ul>

                    <p><br/>
                    </p>

                    <h3><a id="event_bits" name="event_bits">Event
                      Bits (Event Flags)</a></h3>
                    Event bits are used to indicate if an event has
                    occurred or not. Event bits are often referred to
                    as event <i>flags</i>. For example, an
                    application may:
                    <ul>
                      <li>Define a bit (or flag) that means "A message
                        has been received and is ready for processing"
                        when it is set to 1, and "there are no messages
                        waiting to be processed" when it is set to 0.</li>

                      <li>Define a bit (or flag) that means "The
                        application has queued a message that is ready
                        to be sent to a network" when it is set to 1,
                        and "there are no messages queued ready to be
                        sent to the network" when it is set to 0.</li>

                      <li>Define a bit (or flag) that means "It is
                        time to send a heartbeat message onto a
                        network" when it is set to 1, and "it is not
                        yet time to send another heartbeat message"
                        when it is set to 0.</li>
                    </ul>

                    <p><br/>
                    </p>

                    <h3><a id="event_groups" name="event_groups">Event Groups</a></h3>
                    An event group is a set of event bits. Individual
                    event bits within an event group are referenced by
                    a bit number. Expanding the example provided above:

                    <ul>
                      <li>The event bit that means "A message has been
                        received and is ready for processing" might be
                        bit number 0 within an event group.</li>

                      <li>The event bit that means "The application
                        has queued a message that is ready to be sent
                        to a network" might be bit number 1 within the
                        same event group.</li>

                      <li>The event bit that means "It is time to send
                        a heartbeat message onto a network" might be
                        bit number 2 within the same event group.</li>
                    </ul>

                    <p><br/>
                    </p>

                    <h3><a id="data_types" name="data_types">Event
                      Group and Event Bits Data Types</a></h3>
                    Event groups are referenced by variables of type
                    EventGroupHandle_t.
                    <p>The number of bits (or flags) stored within an
                      event group is 8 if <a href="/a00110.html#configUSE_16_BIT_TICKS">configUSE_16_BIT_TICKS</a> is set to 1, or 24
                      if configUSE_16_BIT_TICKS is set to 0. The
                      dependency on configUSE_16_BIT_TICKS results from
                      the data type used for thread local storage in
                      the internal implementation of tasks.</p>

                    <p>All the event bits in an event group are stored
                      in a single unsigned variable of type
                      EventBits_t. Event bit 0 is stored in bit
                      position 0, event bit 1 is stored in bit position
                      1, and so on.</p>

                    <p>The image below represents a 24-bit event group
                      that uses three bits to hold the three example
                      events already described. In the image only event
                      bit 2 is set.</p>

                    <div align="center"><img alt="An event group containing 24 event flags" src="/24-bit-event-group.gif" width="600px"/>
                      <small><br/>
                      <b>An event group containing 24-event bits, only
                      three of which are in use</b></small></div>

                    <p><br/>
                    </p>

                    <h3><a id="API" name="API">Event Group RTOS API
                      Functions</a></h3>
                    Event group <a href="/event-groups-API.html">API
                    functions</a> are provided that allow a task to,
                    among other things, <a href="/xEventGroupSetBits.html">set</a> one or
                    more event bits within an event group, <a href="/xEventGroupClearBits.html">clear</a> one
                    or more event bits within an event group, and <a href="/xEventGroupWaitBits.html">pend</a> (enter
                    the Blocked state so the task does not consume any
                    processing time) to wait for a set of one or more
                    event bits to become set within an event group.
                    <p>Event groups can also be used to <a href="xEventGroupSync.html">synchronise</a>
                      tasks, creating what is often referred to as a
                      task 'rendezvous'. A task synchronisation point
                      is a place in application code at which a task
                      will wait in the Blocked state (not consuming any
                      CPU time) until all the other tasks taking part
                      in the synchronisation also reached their
                      synchronisation point.</p>

                    <p><br/>
                    </p>

                    <h3><a id="challenges" name="challenges">The
                      Challenges an RTOS Must Overcome When
                      Implementing Event Groups</a></h3>
                    The two main challenges an RTOS must overcome when
                    implementing event groups are:
                    <ol>
                      <li><u>Avoiding the creation of race conditions
                        in the user's application:</u>
                        <p>An event group implementation will create a
                          race condition in the application if:</p>

                        <ul>
                          <li>It is not clear who is responsible for
                            clearing individual bits (or flags).</li>

                          <li>It is not clear when a bit is to be
                            cleared.</li>

                          <li>It is not clear if a bit was set or
                            clear at the time a task exited the API
                            function that tested the bit's value (it
                            could be that another task or interrupt has
                            since changed the bit's state).</li>
                        </ul>
                        The FreeRTOS event groups implementation
                        removes the potential for race conditions by
                        including built in intelligence to ensure
                        setting, testing and clearing of bits appears
                        atomic. Thread local storage and careful use of
                        API function return values make this possible.</li>

                      <li><u>Avoiding non-determinism:</u>
                        <p>The event group concept implies
                          non-deterministic behaviour because it is not
                          know how many tasks are blocked on an event
                          group, and therefore it is not known how many
                          conditions will need to be tested or tasks
                          unblocked when an event bit is set.</p>

                        <p>The FreeRTOS quality standards do <b>not</b> permit non-deterministic actions to
                          be performed while interrupts are disabled,
                          or from within interrupt service routines. To
                          ensure these strict quality standards are not
                          breached when an event bit is set:</p>

                        <ul>
                          <li>The RTOS scheduler's locking mechanism
                            is used to ensure interrupts remain enabled
                            when an event bit is set from an RTOS task.</li>

                          <li>The centralised deferred interrupt
                            mechanism is used to defer the action of
                            setting a bit to a task when an attempt is
                            made to set an event bit from an interrupt
                            service routine.</li>
                        </ul>
                      </li>
                    </ol>

                    <p><br/>
                    </p>

                    <h3><a id="examples" name="examples">Example
                      Code</a></h3>
                    Example code snippets are provided in the <a href="/event-groups-API.html">API</a>
                    documentation, and a comprehensive example is
                    provided in the <tt>EventGroupsDemo.c</tt> set of
                    standard demo tasks (the source file is located in
                    the <tt>FreeRTOS/Demo/Common/Minimal</tt>
                    directory of the main <a href="/a00104.html">FreeRTOS download</a>).<br/>
                    <br/>
                    <br/>
                    <br/>

                    <p><br/>
                    </p>

                    <div align="center"><a href="#page_top"><small>[
                      Back to the top ]</small></a> &nbsp;&nbsp; <a href="/RTOS.html"><small>[ About FreeRTOS
                      ]</small></a> &nbsp;&nbsp; <a href="/static_menu.html"><small>[ Sitemap
                      ]</small></a> &nbsp;&nbsp; <small>[
                      <script type="text/javascript"><![CDATA[
<!--
                                                        var v2="54Z5C4TRXBFU5TYAC";var v7=unescape("%5CZ%3CZ%03R%267%3D02%3AFz63%24");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=Website%20feedback'+'\'">'+'Report an error on this page<\/a>');
                                                        //-->
]]></script></small>
                      <noscript/>
                      <a href="http://w2.syronex.com/jmr/safemailto/#noscript">Report an error on this page (with anti-spam)</a> ]</div>
                    <br/>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <p><br/>
                    </p>

                    <div align="center" class="text_ad"><font size="1">Copyright (C) 2004-2010 Richard Barry. Copyright
                      (C) 2010-2016 Real Time Engineers Ltd.<br/>
                      Any and all data, files, source code, html
                      content and documentation included in the
                      FreeRTOS<small><sup>TM</sup></small>
                      distribution or available on this site are the
                      exclusive property of Real Time Engineers Ltd..
                      See the files license.txt (included in the
                      distribution) and this <a href="/copyright.html">copyright notice</a> for more information.
                      FreeRTOS<sup>TM</sup> and FreeRTOS.org<sup>TM</sup> are trade marks of Real Time Engineers
                      Ltd.</font></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>

          
        </tr>
      </tbody>
    </table>

    <script language="JavaScript" type="text/javascript"><![CDATA[
<!--
        document.getElementById('banner_div').innerHTML = show_banners2();
//-->
]]></script></body>
</html>
