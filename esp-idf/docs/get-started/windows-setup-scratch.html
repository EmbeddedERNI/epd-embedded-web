

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup Windows Toolchain from Scratch &mdash; ESP-IDF Programming Guide v3.0-dev-806-gde750e9 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="ESP-IDF Programming Guide v3.0-dev-806-gde750e9 documentation" href="../index.html"/>
        <link rel="up" title="Standard Setup of Toolchain for Windows" href="windows-setup.html"/>
        <link rel="next" title="Standard Setup of Toolchain for Linux" href="linux-setup.html"/>
        <link rel="prev" title="Standard Setup of Toolchain for Windows" href="windows-setup.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
          </a>

          
            
            
              <div class="version">
                v3.0-dev-806-gde750e9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Get Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-you-need">What You Need</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#guides">Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#setup-toolchain">Setup Toolchain</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="windows-setup.html">Windows</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="windows-setup.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows-setup.html#toolchain-setup">Toolchain Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows-setup.html#check-it-out">Check it Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows-setup.html#next-steps">Next Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="windows-setup.html#updating-the-environment">Updating The Environment</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="windows-setup.html#related-documents">Related Documents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="linux-setup.html">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="macos-setup.html">MacOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#get-esp-idf">Get ESP-IDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#setup-path-to-esp-idf">Setup Path to ESP-IDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#start-a-project">Start a Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#connect">Connect</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configure">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#build-and-flash">Build and Flash</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#monitor">Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#updating-esp-idf">Updating ESP-IDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#related-documents">Related Documents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ESP-IDF Programming Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Get Started</a> &raquo;</li>
        
          <li><a href="windows-setup.html">Standard Setup of Toolchain for Windows</a> &raquo;</li>
        
      <li>Setup Windows Toolchain from Scratch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/get-started/windows-setup-scratch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup-windows-toolchain-from-scratch">
<h1>Setup Windows Toolchain from Scratch<a class="headerlink" href="windows-setup-scratch.html#setup-windows-toolchain-from-scratch" title="Permalink to this headline">¶</a></h1>
<p>Setting up the environment gives you some more control over the process, and also provides the information for advanced users to customize the install. The <a class="reference internal" href="windows-setup.html"><span class="doc">pre-built environment</span></a>, addressed to less experienced users, has been prepared by following these steps.</p>
<p>To quickly setup the toolchain in standard way, using a prebuilt environment, proceed to section <a class="reference internal" href="windows-setup.html"><span class="doc">Standard Setup of Toolchain for Windows</span></a>.</p>
<div class="section" id="configure-toolchain-environment-from-scratch">
<span id="configure-windows-toolchain-from-scratch"></span><h2>Configure Toolchain &amp; Environment from Scratch<a class="headerlink" href="windows-setup-scratch.html#configure-toolchain-environment-from-scratch" title="Permalink to this headline">¶</a></h2>
<p>This process involves installing <a class="reference external" href="https://msys2.github.io/">MSYS2</a>, then installing the <a class="reference external" href="https://msys2.github.io/">MSYS2</a> and Python packages which ESP-IDF uses, and finally downloading and installing the Xtensa toolchain.</p>
<ul>
<li><p class="first">Navigate to the <a class="reference external" href="https://msys2.github.io/">MSYS2</a> installer page and download the <code class="docutils literal"><span class="pre">msys2-i686-xxxxxxx.exe</span></code> installer executable (we only support a 32-bit MSYS environment, it works on both 32-bit and 64-bit Windows.) At time of writing, the latest installer is <code class="docutils literal"><span class="pre">msys2-i686-20161025.exe</span></code>.</p>
</li>
<li><p class="first">Run through the installer steps. <strong>Uncheck the &#8220;Run MSYS2 32-bit now&#8221; checkbox at the end.</strong></p>
</li>
<li><p class="first">Once the installer exits, open Start Menu and find &#8220;MSYS2 MinGW 32-bit&#8221; to run the terminal.</p>
<p><em>(Why launch this different terminal? MSYS2 has the concept of different kinds of environments. The default &#8220;MSYS&#8221; environment is Cygwin-like and uses a translation layer for all Windows API calls. We need the &#8220;MinGW&#8221; environment in order to have a native Python which supports COM ports.)</em></p>
</li>
<li><p class="first">The ESP-IDF repository on github contains a script in the tools directory titled <code class="docutils literal"><span class="pre">windows_install_prerequisites.sh</span></code>. If you haven&#8217;t got a local copy of the ESP-IDF yet, that&#8217;s OK - you can just download that one file in Raw format from here: <a class="reference external" href="https://github.com/espressif/esp-idf/raw/de750e9/tools/windows/windows_install_prerequisites.sh">tools/windows/windows_install_prerequisites.sh</a>. Save it somewhere on your computer.</p>
</li>
<li><p class="first">Type the path to the shell script into the MSYS2 terminal window. You can type it as a normal Windows path, but use forward-slashes instead of back-slashes. ie: <code class="docutils literal"><span class="pre">C:/Users/myuser/Downloads/windows_install_prerequisites.sh</span></code>. You can read the script beforehand to check what it does.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">windows_install_prerequisites.sh</span></code> script will download and install packages for ESP-IDF support, and the ESP32 toolchain.</p>
</li>
</ul>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="windows-setup-scratch.html#troubleshooting" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">While the install script runs, MSYS may update itself into a state where it can no longer operate. You may see errors like the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">***</span> <span class="n">fatal</span> <span class="n">error</span> <span class="o">-</span> <span class="n">cygheap</span> <span class="n">base</span> <span class="n">mismatch</span> <span class="n">detected</span> <span class="o">-</span> <span class="mh">0x612E5408</span><span class="o">/</span><span class="mh">0x612E4408</span><span class="o">.</span> <span class="n">This</span> <span class="n">problem</span> <span class="ow">is</span> <span class="n">probably</span> <span class="n">due</span> <span class="n">to</span> <span class="n">using</span> <span class="n">incompatible</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">the</span> <span class="n">cygwin</span> <span class="n">DLL</span><span class="o">.</span>
</pre></div>
</div>
<p>If you see errors like this, close the terminal window entirely (terminating the processes running there) and then re-open a new terminal. Re-run <code class="docutils literal"><span class="pre">windows_install_prerequisites.sh</span></code> (tip: use the up arrow key to see the last run command). The update process will resume after this step.</p>
</li>
<li><p class="first">MSYS2 is a &#8220;rolling&#8221; distribution so running the installer script may install newer packages than what is used in the prebuilt environments. If you see any errors that appear to be related to installing MSYS2 packages, please check the <a class="reference external" href="https://github.com/Alexpux/MSYS2-packages/issues/">MSYS2-packages issues list</a> for known issues. If you don&#8217;t see any relevant issues, please <a class="reference external" href="https://github.com/espressif/esp-idf/issues/new">raise an IDF issue</a>.</p>
</li>
</ul>
</div>
<div class="section" id="msys2-mirrors-in-china">
<h3>MSYS2 Mirrors in China<a class="headerlink" href="windows-setup-scratch.html#msys2-mirrors-in-china" title="Permalink to this headline">¶</a></h3>
<p>There are some (unofficial) MSYS2 mirrors inside China, which substantially improves download speeds inside China.</p>
<p>To add these mirrors, edit the following two MSYS2 mirrorlist files before running the setup script. The mirrorlist files can be found in the <code class="docutils literal"><span class="pre">/etc/pacman.d</span></code> directory (i.e. <code class="docutils literal"><span class="pre">c:\msys2\etc\pacman.d</span></code>).</p>
<p>Add these lines at the top of <code class="docutils literal"><span class="pre">mirrorlist.mingw32</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Server</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">mirrors</span><span class="o">.</span><span class="n">ustc</span><span class="o">.</span><span class="n">edu</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">msys2</span><span class="o">/</span><span class="n">mingw</span><span class="o">/</span><span class="n">i686</span><span class="o">/</span>
<span class="n">Server</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mirror</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">edu</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">msys2</span><span class="o">/</span><span class="n">REPOS</span><span class="o">/</span><span class="n">MINGW</span><span class="o">/</span><span class="n">i686</span>
</pre></div>
</div>
<p>Add these lines at the top of <code class="docutils literal"><span class="pre">mirrorlist.msys</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>Server = http://mirrors.ustc.edu.cn/msys2/msys/$arch
Server = http://mirror.bit.edu.cn/msys2/REPOS/MSYS2/$arch
</pre></div>
</div>
</div>
<div class="section" id="http-proxy">
<h3>HTTP Proxy<a class="headerlink" href="windows-setup-scratch.html#http-proxy" title="Permalink to this headline">¶</a></h3>
<p>You can enable an HTTP proxy for MSYS and PIP downloads by setting the <code class="docutils literal"><span class="pre">http_proxy</span></code> variable in the terminal before running the setup script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">http_proxy</span><span class="o">=</span><span class="s1">&#39;http://http.proxy.server:PORT&#39;</span>
</pre></div>
</div>
<p>Or with credentials:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">http_proxy</span><span class="o">=</span><span class="s1">&#39;http://user:password@http.proxy.server:PORT&#39;</span>
</pre></div>
</div>
<p>Add this line to <code class="docutils literal"><span class="pre">/etc/profile</span></code> in the MSYS directory in order to permanently enable the proxy when using MSYS.</p>
</div>
</div>
<div class="section" id="alternative-setup-just-download-a-toolchain">
<h2>Alternative Setup: Just download a toolchain<a class="headerlink" href="windows-setup-scratch.html#alternative-setup-just-download-a-toolchain" title="Permalink to this headline">¶</a></h2>
<p>If you already have an MSYS2 install or want to do things differently, you can download just the toolchain here:</p>
<p><a class="reference external" href="https://dl.espressif.com/dl/xtensa-esp32-elf-win32-1.22.0-73-ge28a011-5.2.0.zip">https://dl.espressif.com/dl/xtensa-esp32-elf-win32-1.22.0-73-ge28a011-5.2.0.zip</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you followed instructions <a class="reference internal" href="windows-setup-scratch.html#configure-windows-toolchain-from-scratch"><span class="std std-ref">Configure Toolchain &amp; Environment from Scratch</span></a>, you already have the toolchain and you won&#8217;t need this download.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Just having this toolchain is <em>not enough</em> to use ESP-IDF on Windows. You will need GNU make, bash, and sed at minimum. The above environments provide all this, plus a host compiler (required for menuconfig support).</p>
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="windows-setup-scratch.html#next-steps" title="Permalink to this headline">¶</a></h2>
<p>To carry on with development environment setup, proceed to section <a class="reference internal" href="index.html#get-started-get-esp-idf"><span class="std std-ref">Get ESP-IDF</span></a>.</p>
</div>
<div class="section" id="updating-the-environment">
<span id="updating-existing-windows-environment"></span><h2>Updating The Environment<a class="headerlink" href="windows-setup-scratch.html#updating-the-environment" title="Permalink to this headline">¶</a></h2>
<p>When IDF is updated, sometimes new toolchains are required or new system requirements are added to the Windows MSYS2 environment.</p>
<p>Rather than setting up a new environment, you can update an existing Windows environment &amp; toolchain:</p>
<ul class="simple">
<li>Update IDF to the new version you want to use.</li>
<li>Run the <code class="docutils literal"><span class="pre">tools/windows/windows_install_prerequisites.sh</span></code> script inside IDF. This will install any new software packages that weren&#8217;t previously installed, and download and replace the toolchain with the latest version.</li>
</ul>
<p>The script to update MSYS2 may also fail with the same errors mentioned under <a class="reference internal" href="windows-setup-scratch.html#troubleshooting">Troubleshooting</a>.</p>
<p>If you need to support multiple IDF versions concurrently, you can have different independent MSYS2 environments in different directories. Alternatively you can download multiple toolchains and unzip these to different directories, then use the PATH environment variable to set which one is the default.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="linux-setup.html" class="btn btn-neutral float-right" title="Standard Setup of Toolchain for Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="windows-setup.html" class="btn btn-neutral" title="Standard Setup of Toolchain for Windows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2017, Espressif.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v3.0-dev-806-gde750e9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>