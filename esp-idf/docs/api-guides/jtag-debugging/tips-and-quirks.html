

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tips and Quirks &mdash; ESP-IDF Programming Guide v3.0-dev-806-gde750e9 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ESP-IDF Programming Guide v3.0-dev-806-gde750e9 documentation" href="../../index.html"/>
        <link rel="up" title="JTAG Debugging" href="index.html"/>
        <link rel="next" title="Application Level Tracing library" href="../app_trace.html"/>
        <link rel="prev" title="Debugging Examples" href="debugging-examples.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
          </a>

          
            
            
              <div class="version">
                v3.0-dev-806-gde750e9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../general-notes.html">General Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-system.html">Build System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deep-sleep-stub.html">Deep Sleep Wake Stubs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_dump.html">ESP32 Core Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/flash-encryption.html">Flash Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freertos-smp.html">FreeRTOS SMP Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hlinterrupts.html">High Level Interrupts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">JTAG Debugging</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#how-it-works">How it Works?</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#selecting-jtag-adapter">Selecting JTAG Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#setup-of-openocd">Setup of OpenOCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#configuring-esp32-target">Configuring ESP32 Target</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#launching-debugger">Launching Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#debugging-examples">Debugging Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#building-openocd-from-sources">Building OpenOCD from Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#tips-and-quirks">Tips and Quirks</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#related-documents">Related Documents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="using-debugger.html">Using Debugger</a></li>
<li class="toctree-l4"><a class="reference internal" href="debugging-examples.html">Debugging Examples</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="tips-and-quirks.html#">Tips and Quirks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../app_trace.html">Application Level Tracing library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../partition-tables.html">Partition Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/secure-boot.html">Secure Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ulp.html">ULP Coprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unit-tests.html">Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app_trace.html">Application Level Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../romconsole.html">ROM debug console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi.html">WiFi Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external-ram.html">External SPI-connected RAM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Guides</a> &raquo;</li>
        
          <li><a href="index.html">JTAG Debugging</a> &raquo;</li>
        
      <li>Tips and Quirks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api-guides/jtag-debugging/tips-and-quirks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tips-and-quirks">
<h1>Tips and Quirks<a class="headerlink" href="tips-and-quirks.html#tips-and-quirks" title="Permalink to this headline">¶</a></h1>
<p>This section provides collection of all tips and quirks referred to from various parts of this guide.</p>
<div class="section" id="breakpoints-and-watchpoints-available">
<span id="jtag-debugging-tip-breakpoints"></span><h2>Breakpoints and watchpoints available<a class="headerlink" href="tips-and-quirks.html#breakpoints-and-watchpoints-available" title="Permalink to this headline">¶</a></h2>
<p>The ESP32 supports 2 hardware breakpoints. It also supports two watchpoints, so two variables can be watched for change or read by the GDB command <code class="docutils literal"><span class="pre">watch</span> <span class="pre">myVariable</span></code>. Note that menuconfig option <a class="reference internal" href="../../api-reference/kconfig.html#config-freertos-watchpoint-end-of-stack"><span class="std std-ref">FREERTOS_WATCHPOINT_END_OF_STACK</span></a> uses the 2nd watchpoint and will not provide expected results, if you also try to use it within OpenOCD / GDB. See menuconfig&#8217;s help for detailed description.</p>
</div>
<div class="section" id="what-else-should-i-know-about-breakpoints">
<span id="jtag-debugging-tip-where-breakpoints"></span><h2>What else should I know about breakpoints?<a class="headerlink" href="tips-and-quirks.html#what-else-should-i-know-about-breakpoints" title="Permalink to this headline">¶</a></h2>
<p>Normal GDB breakpoints (<code class="docutils literal"><span class="pre">b</span> <span class="pre">myFunction</span></code>) can only be set in IRAM, because that memory is writable. Setting these types of breakpoints in code in flash will not work. Instead, use a hardware breakpoint (<code class="docutils literal"><span class="pre">hb</span> <span class="pre">myFunction</span></code>).</p>
</div>
<div class="section" id="why-stepping-with-next-does-not-bypass-subroutine-calls">
<span id="jtag-debugging-tip-why-next-works-as-step"></span><h2>Why stepping with &#8220;next&#8221; does not bypass subroutine calls?<a class="headerlink" href="tips-and-quirks.html#why-stepping-with-next-does-not-bypass-subroutine-calls" title="Permalink to this headline">¶</a></h2>
<p>When stepping through the code with <code class="docutils literal"><span class="pre">next</span></code> command, GDB is internally setting a breakpoint (one out of two available) ahead in the code to bypass the subroutine calls. This functionality will not work, if the two available breakpoints are already set elsewhere in the code. If this is the case, delete breakpoints to have one &#8220;spare&#8221;. With both breakpoints already used, stepping through the code with <code class="docutils literal"><span class="pre">next</span></code> command will work as like with <code class="docutils literal"><span class="pre">step</span></code> command and debugger will step inside subroutine calls.</p>
</div>
<div class="section" id="support-options-for-openocd-at-compile-time">
<span id="jtag-debugging-tip-code-options"></span><h2>Support options for OpenOCD at compile time<a class="headerlink" href="tips-and-quirks.html#support-options-for-openocd-at-compile-time" title="Permalink to this headline">¶</a></h2>
<p>The ESP-IDF code has various support options for OpenOCD set at compile time: it can stop execution when the first thread is started and break the system if a panic or unhandled exception is thrown. First option is disabled and second enabled by default and both can be changed using the esp-idf configuration menu. Please see the <a class="reference internal" href="../../get-started/index.html#get-started-configure"><span class="std std-ref">make menuconfig</span></a> menu for more details.</p>
</div>
<div class="section" id="freertos-support">
<span id="jtag-debugging-tip-freertos-support"></span><h2>FreeRTOS support<a class="headerlink" href="tips-and-quirks.html#freertos-support" title="Permalink to this headline">¶</a></h2>
<p>OpenOCD has explicit support for the ESP-IDF FreeRTOS. GDB can see FreeRTOS tasks as threads. Viewing them all can be done using the GDB <code class="docutils literal"><span class="pre">i</span> <span class="pre">threads</span></code> command, changing to a certain task is done with <code class="docutils literal"><span class="pre">thread</span> <span class="pre">n</span></code>, with <code class="docutils literal"><span class="pre">n</span></code> being the number of the thread. FreeRTOS detection can be disabled in target&#8217;s configuration. For more details see <a class="reference internal" href="tips-and-quirks.html#jtag-debugging-tip-openocd-configure-target"><span class="std std-ref">Configuration of OpenOCD for specific target</span></a>.</p>
</div>
<div class="section" id="why-to-set-spi-flash-voltage-in-openocd-configuration">
<span id="jtag-debugging-tip-code-flash-voltage"></span><h2>Why to set SPI flash voltage in OpenOCD configuration?<a class="headerlink" href="tips-and-quirks.html#why-to-set-spi-flash-voltage-in-openocd-configuration" title="Permalink to this headline">¶</a></h2>
<p>The MTDI pin of ESP32, being among four pins used for JTAG communication, is also one of ESP32&#8217;s bootstrapping pins. On power up ESP32 is sampling binary level on MTDI to set it&#8217;s internal voltage regulator used to supply power to external SPI flash chip. If binary level on MDTI pin on power up is low, the voltage regulator is set to deliver 3.3V, if it is high, then the voltage is set to 1.8V. The MTDI pin should have a pull-up or may rely on internal weak pull down resistor (see ESP32 Datasheet for details), depending on the type of SPI chip used. Once JTAG is connected, it overrides the pull-up or pull-down resistor that is supposed to do the bootstrapping.</p>
<p>To handle this issue OpenOCD&#8217;s board configuration file (e.g. <code class="docutils literal"><span class="pre">boards\esp-wroom-32.cfg</span></code> for ESP-WROOM-32 module) provides <code class="docutils literal"><span class="pre">ESP32_FLASH_VOLTAGE</span></code> parameter to set the idle state of the <code class="docutils literal"><span class="pre">TDO</span></code> line to a specified binary level, therefore reducing the chance of a bad bootup of application due to incorrect flash voltage.</p>
<p>Check specification of ESP32 module connected to JTAG, what is the power supply voltage of SPI flash chip. Then set <code class="docutils literal"><span class="pre">ESP32_FLASH_VOLTAGE</span></code> accordingly. Most WROOM modules use 3.3V flash, while WROVER modules use 1.8V flash.</p>
</div>
<div class="section" id="optimize-jtag-speed">
<span id="jtag-debugging-tip-optimize-jtag-speed"></span><h2>Optimize JTAG speed<a class="headerlink" href="tips-and-quirks.html#optimize-jtag-speed" title="Permalink to this headline">¶</a></h2>
<p>In order to achieve higher data rates and minimize number of dropped packets it is recommended to optimize setting of JTAG clock frequency, so it is at maximum and still provides stable operation of JTAG. To do so use the following tips.</p>
<ol class="arabic simple">
<li>The upper limit of JTAG clock frequency is 20 MHz if CPU runs at 80 MHz, or 26 MHz if CPU runs at 160 MHz or 240 MHz.</li>
<li>Depending on particular JTAG adapter and the length of connecting cables, you may need to reduce JTAG frequency below 20 / 26 MHz.</li>
<li>In particular reduce frequency, if you get DSR/DIR errors (and they do not relate to OpenOCD trying to read from a memory range without physical memory being present there).</li>
<li>ESP-WROVER-KIT operates stable at 20 / 26 MHz.</li>
</ol>
</div>
<div class="section" id="what-is-the-meaning-of-debugger-s-startup-commands">
<span id="jtag-debugging-tip-debugger-startup-commands"></span><h2>What is the meaning of debugger&#8217;s startup commands?<a class="headerlink" href="tips-and-quirks.html#what-is-the-meaning-of-debugger-s-startup-commands" title="Permalink to this headline">¶</a></h2>
<p>On startup, debugger is issuing sequence of commands to reset the chip and halt it at specific line of code. This sequence (shown below) is user defined to pick up at most convenient / appropriate line and start debugging.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">mon</span> <span class="pre">reset</span> <span class="pre">halt</span></code> — reset the chip and keep the CPUs halted</li>
<li><code class="docutils literal"><span class="pre">thb</span> <span class="pre">app_main</span></code> — insert a temporary hardware breakpoint at <code class="docutils literal"><span class="pre">app_main</span></code>, put here another function name if required</li>
<li><code class="docutils literal"><span class="pre">x</span> <span class="pre">$a1=0</span></code> — this is the tricky part. As far as we can tell, there is no way for a <code class="docutils literal"><span class="pre">mon</span></code> command to tell GDB that the target state has changed. GDB will assume that whatever stack the target had before <code class="docutils literal"><span class="pre">mon</span> <span class="pre">reset</span> <span class="pre">halt</span></code> will still be valid. In fact, after reset the target state will change and executing <code class="docutils literal"><span class="pre">x</span> <span class="pre">$a1=0</span></code> is a way to force GDB to get new state from the target.</li>
<li><code class="docutils literal"><span class="pre">c</span></code> — resume the program. It will then stop at breakpoint inserted at <code class="docutils literal"><span class="pre">app_main</span></code>.</li>
</ul>
</div>
<div class="section" id="configuration-of-openocd-for-specific-target">
<span id="jtag-debugging-tip-openocd-configure-target"></span><h2>Configuration of OpenOCD for specific target<a class="headerlink" href="tips-and-quirks.html#configuration-of-openocd-for-specific-target" title="Permalink to this headline">¶</a></h2>
<p>OpenOCD needs to be told what JTAG adapter <strong>interface</strong> to use, as well as what type of <strong>board</strong> and processor the JTAG adapter is connected to. To do so, use existing configuration files located in OpenOCD&#8217;s <code class="docutils literal"><span class="pre">share/openocd/scripts/interface</span></code> and <code class="docutils literal"><span class="pre">share/openocd/scripts/board</span></code> folders.</p>
<p>For example, if you connect to ESP-WROVER-KIT with ESP-WROOM-32 module installed (see section <a class="reference internal" href="../../hw-reference/modules-and-boards.html"><span class="doc">ESP32 WROVER KIT</span></a>), use the following configuration files:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">interface/ftdi/esp32_devkitj_v1.cfg</span></code></li>
<li><code class="docutils literal"><span class="pre">board/esp-wroom-32.cfg</span></code></li>
</ul>
<p>Optionally prepare configuration by yourself. To do so, you can check existing files and modify them to match you specific hardware. Below is the summary of available configuration parameters for <strong>board</strong> configuration.</p>
<div class="section" id="adapter-s-clock-speed">
<h3>Adapter&#8217;s clock speed<a class="headerlink" href="tips-and-quirks.html#adapter-s-clock-speed" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>adapter_khz 20000
</pre></div>
</div>
<p>See <a class="reference internal" href="tips-and-quirks.html#jtag-debugging-tip-optimize-jtag-speed"><span class="std std-ref">Optimize JTAG speed</span></a> for guidance how to set this value.</p>
</div>
<div class="section" id="single-core-debugging">
<h3>Single core debugging<a class="headerlink" href="tips-and-quirks.html#single-core-debugging" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>set ESP32_ONLYCPU 1
</pre></div>
</div>
<p>Comment out this line for dual core debugging.</p>
</div>
<div class="section" id="disable-rtos-support">
<h3>Disable RTOS support<a class="headerlink" href="tips-and-quirks.html#disable-rtos-support" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>set ESP32_RTOS none
</pre></div>
</div>
<p>Comment out this line to have RTOS support.</p>
</div>
<div class="section" id="power-supply-voltage-of-esp32-s-spi-flash-chip">
<h3>Power supply voltage of ESP32&#8217;s SPI flash chip<a class="headerlink" href="tips-and-quirks.html#power-supply-voltage-of-esp32-s-spi-flash-chip" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>set ESP32_FLASH_VOLTAGE 1.8
</pre></div>
</div>
<p>Comment out this line to set 3.3V, ref: <a class="reference internal" href="tips-and-quirks.html#jtag-debugging-tip-code-flash-voltage"><span class="std std-ref">Why to set SPI flash voltage in OpenOCD configuration?</span></a></p>
</div>
<div class="section" id="configuration-file-for-esp32-targets">
<h3>Configuration file for ESP32 targets<a class="headerlink" href="tips-and-quirks.html#configuration-file-for-esp32-targets" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>source [find target/esp32.cfg]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not change <code class="docutils literal"><span class="pre">source</span> <span class="pre">[find</span> <span class="pre">target/esp32.cfg]</span></code> line unless you are familiar with OpenOCD internals.</p>
</div>
<p>Currently <code class="docutils literal"><span class="pre">target/esp32.cfg</span></code> remains the only configuration file for ESP32 targets (esp108 and esp32). The matrix of supported configurations is as follows:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Dual/single</th>
<th class="head">RTOS</th>
<th class="head">Target used</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dual</td>
<td>FreeRTOS</td>
<td>esp32</td>
</tr>
<tr class="row-odd"><td>single</td>
<td>FreeRTOS</td>
<td>esp108 (*)</td>
</tr>
<tr class="row-even"><td>dual</td>
<td>none</td>
<td>esp108</td>
</tr>
<tr class="row-odd"><td>single</td>
<td>none</td>
<td>esp108</td>
</tr>
</tbody>
</table>
<p>(*) — we plan to fix this and add support for single core debugging with esp32 target in a subsequent commits.</p>
</div></blockquote>
<p>Look inside <code class="docutils literal"><span class="pre">board/esp-wroom-32.cfg</span></code> for additional information provided in comments besides each configuration parameter.</p>
</div>
</div>
<div class="section" id="how-debugger-resets-esp32">
<span id="jtag-debugging-tip-reset-by-debugger"></span><h2>How debugger resets ESP32?<a class="headerlink" href="tips-and-quirks.html#how-debugger-resets-esp32" title="Permalink to this headline">¶</a></h2>
<p>The board can be reset by entering <code class="docutils literal"><span class="pre">mon</span> <span class="pre">reset</span></code> or <code class="docutils literal"><span class="pre">mon</span> <span class="pre">reset</span> <span class="pre">halt</span></code> into GDB.</p>
</div>
<div class="section" id="do-not-use-jtag-pins-for-something-else">
<span id="jtag-debugging-tip-jtag-pins-reconfigured"></span><h2>Do not use JTAG pins for something else<a class="headerlink" href="tips-and-quirks.html#do-not-use-jtag-pins-for-something-else" title="Permalink to this headline">¶</a></h2>
<p>Operation of JTAG may be disturbed, if some other h/w is connected to JTAG pins besides ESP32 module and JTAG adapter. ESP32 JTAG us using the following pins:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="50%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">ESP32 JTAG Pin</th>
<th class="head">JTAG Signal</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>MTDO / GPIO15</td>
<td>TDO</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>MTDI / GPIO12</td>
<td>TDI</td>
</tr>
<tr class="row-even"><td>3</td>
<td>MTCK / GPIO13</td>
<td>TCK</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>MTMS / GPIO14</td>
<td>TMS</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>JTAG communication will likely fail, if configuration of JTAG pins is changed by user application. If OpenOCD initializes correctly (detects the two Tensilica cores), but loses sync and spews out a lot of DTR/DIR errors when the program is ran, it is likely that the application reconfigures the JTAG pins to something else, or the user forgot to connect Vtar to a JTAG adapter that needed it.</p>
<p>Below is an excerpt from series of errors reported by GDB after the application stepped into the code that reconfigured MTDO / GPIO15 to be an input:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>cpu0: xtensa_resume (line 431): DSR (FFFFFFFF) indicates target still busy!
cpu0: xtensa_resume (line 431): DSR (FFFFFFFF) indicates DIR instruction generated an exception!
cpu0: xtensa_resume (line 431): DSR (FFFFFFFF) indicates DIR instruction generated an overrun!
cpu1: xtensa_resume (line 431): DSR (FFFFFFFF) indicates target still busy!
cpu1: xtensa_resume (line 431): DSR (FFFFFFFF) indicates DIR instruction generated an exception!
cpu1: xtensa_resume (line 431): DSR (FFFFFFFF) indicates DIR instruction generated an overrun!
</pre></div>
</div>
</div>
<div class="section" id="reporting-issues-with-openocd-gdb">
<span id="jtag-debugging-tip-reporting-issues"></span><h2>Reporting issues with OpenOCD / GDB<a class="headerlink" href="tips-and-quirks.html#reporting-issues-with-openocd-gdb" title="Permalink to this headline">¶</a></h2>
<p>In case you encounter a problem with OpenOCD or GDB programs itself and do not find a solution searching available resources on the web, open an issue in the OpenOCD issue tracker under <a class="reference external" href="https://github.com/espressif/openocd-esp32/issues">https://github.com/espressif/openocd-esp32/issues</a>.</p>
<ol class="arabic simple">
<li>In issue report provide details of your configuration:<ol class="loweralpha">
<li>JTAG adapter type.</li>
<li>Release of ESP-IDF used to compile and load application that is being debugged.</li>
<li>Details of OS used for debugging.</li>
<li>Is OS running natively on a PC or on a virtual machine?</li>
</ol>
</li>
<li>Create a simple example that is representative to observed issue. Describe steps how to reproduce it. In such an example debugging should not be affected by non-deterministic behaviour introduced by the Wi-Fi stack, so problems will likely be easier to reproduce, if encountered once.</li>
</ol>
<ol class="arabic" start="3">
<li><p class="first">Prepare logs from debugging session by adding additional parameters to start up commands.</p>
<p>OpenOCD:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>bin/openocd -l openocd_log.txt -d <span class="m">3</span> -s share/openocd/scripts -f interface/ftdi/esp32_devkitj_v1.cfg -f board/esp-wroom-32.cfg
</pre></div>
</div>
<p>Logging to a file this way will prevent information displayed on the terminal. This may be a good thing taken amount of information provided, when increased debug level <code class="docutils literal"><span class="pre">-d</span> <span class="pre">3</span></code> is set. If you still like to see the log on the screen, then use another command instead:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>bin/openocd -d <span class="m">3</span> -s share/openocd/scripts -f interface/ftdi/esp32_devkitj_v1.cfg -f board/esp-wroom-32.cfg <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> tee openocd.log
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="index.html#jtag-debugging-building-openocd"><span class="std std-ref">Building OpenOCD from Sources</span></a> for slightly different command format, when running OpenOCD built from sources.</p>
</div>
</div></blockquote>
<p>Debugger:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>xtensa-esp32-elf-gdb -ex <span class="s2">&quot;set remotelogfile gdb_log.txt&quot;</span> &lt;all other options&gt;
</pre></div>
</div>
<p>Optionally add command <code class="docutils literal"><span class="pre">remotelogfile</span> <span class="pre">gdb_log.txt</span></code> to the <code class="docutils literal"><span class="pre">gdbinit</span></code> file.</p>
</div></blockquote>
</li>
<li><p class="first">Attach both <code class="docutils literal"><span class="pre">openocd_log.txt</span></code> and <code class="docutils literal"><span class="pre">gdb_log.txt</span></code> files to your issue report.</p>
</li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../app_trace.html" class="btn btn-neutral float-right" title="Application Level Tracing library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="debugging-examples.html" class="btn btn-neutral" title="Debugging Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2017, Espressif.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'v3.0-dev-806-gde750e9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>